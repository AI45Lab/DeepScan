model:
  # Use any registry key you already have (example: qwen2.5)
  generation: qwen2.5
  model_name: Qwen2.5-7B-Instruct
  device: cuda
  # Match the checkpoint's native dtype when possible; use "auto" if unsure.
  dtype: bfloat16
  load_in_8bit: false
  trust_remote_code: true
  load_tokenizer: true
  # Reference generation parameters (deterministic)
  generation_config:
    do_sample: false
    temperature: 0.0
    top_p: 1.0
    top_k: 0
    repetition_penalty: 1.0

dataset:
  name: spin/csv_bundle
  dataset1_name: privacy
  dataset2_name: fairness
  # Point to CSVs with columns: prompt,response
  dataset1_path: /root/code/LLM-Diagnose-Framework/dataset/spin/beaver_train330k_privacy_safe_10.csv
  dataset2_path: /root/code/LLM-Diagnose-Framework/dataset/spin/beaver_train330k_fairness_safe_10.csv
  # Optional: cap rows loaded from each CSV
  # max_rows: 1000
  # Optional: strictly validate local loading (preload via stdlib CSV, no HF datasets needed)
  # preload: true

evaluator:
  type: spin
  # Keep nsamples <= available rows (100-row samples)
  nsamples: 8
  seed: 0
  # Ratio controlling top-index selection per dataset
  q: 5e-7   # dataset1/dataset2
  target_module: mlp  # mlp | self_attn | all
  per_layer: true
  per_module: false
  device: cuda
  save_coupling_plot: true

# Optional summarizer:
# summarizer:
#   type: spin
#   top_layers: 5


